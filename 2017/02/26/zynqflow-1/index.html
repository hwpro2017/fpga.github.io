<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Vivado Flow,ZYNQ Flow,ZYPI," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="我们将在ZYNQ的PL部分添加两个GPIO的IP核，通过PL中的GPIO IP核来扩展PS部分的功能。本实验中的两个GPIO IP核将用来控制板卡上的拨码开关和LED灯，GPIO IP核将通过AXI Interconnect 模块来连接到PS的M_AXI_GP0接口上。GPIO IP核中的寄存器会作为Memory-mapped的方式映射在PS的地址空间上，PS端即可通过对相关地址的控制来完成对相应">
<meta property="og:type" content="article">
<meta property="og:title" content="ZYNQ上手教程1-软硬件协同设计流程">
<meta property="og:url" content="http://fpgaplayer.com/2017/02/26/zynqflow-1/index.html">
<meta property="og:site_name" content="FPGA Player">
<meta property="og:description" content="我们将在ZYNQ的PL部分添加两个GPIO的IP核，通过PL中的GPIO IP核来扩展PS部分的功能。本实验中的两个GPIO IP核将用来控制板卡上的拨码开关和LED灯，GPIO IP核将通过AXI Interconnect 模块来连接到PS的M_AXI_GP0接口上。GPIO IP核中的寄存器会作为Memory-mapped的方式映射在PS的地址空间上，PS端即可通过对相关地址的控制来完成对相应">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/083726234.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/084732784.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/084943965.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085138653.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085221806.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085238837.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085314823.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085329789.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085425706.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085454237.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085508404.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085528167.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085536079.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085606151.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085637097.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085728551.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085732802.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085738231.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085815764.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085833505.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085839320.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085843529.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085923796.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085928127.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090034224.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090038574.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090051598.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090055858.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090107211.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090120700.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090124989.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090138184.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090156677.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090213351.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090235003.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090239241.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090243375.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090310121.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090314514.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090329463.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090342962.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090345994.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090351482.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090404633.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090408886.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090423317.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090434621.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090445254.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090448752.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090502069.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090506244.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090517911.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090520828.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090606575.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090619478.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090630376.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090642834.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090649346.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090701021.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090712661.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090716944.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090730483.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090956538.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/091007963.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/091011072.png-960img">
<meta property="og:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/091026117.png-960img">
<meta property="og:updated_time" content="2017-02-26T02:51:32.053Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZYNQ上手教程1-软硬件协同设计流程">
<meta name="twitter:description" content="我们将在ZYNQ的PL部分添加两个GPIO的IP核，通过PL中的GPIO IP核来扩展PS部分的功能。本实验中的两个GPIO IP核将用来控制板卡上的拨码开关和LED灯，GPIO IP核将通过AXI Interconnect 模块来连接到PS的M_AXI_GP0接口上。GPIO IP核中的寄存器会作为Memory-mapped的方式映射在PS的地址空间上，PS端即可通过对相关地址的控制来完成对相应">
<meta name="twitter:image" content="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/083726234.png-960img">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '6382401141535147000',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://fpgaplayer.com/2017/02/26/zynqflow-1/"/>





  <title> ZYNQ上手教程1-软硬件协同设计流程 | FPGA Player </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?cdb421e732ebb368c5643d00163fc965";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">FPGA Player</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">Beginner's Mind</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-share">
          <a href="/share" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />
            
            平台分享
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fpgaplayer.com/2017/02/26/zynqflow-1/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="FPGA玩家">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="FPGA Player">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="FPGA Player" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                ZYNQ上手教程1-软硬件协同设计流程
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-26T17:48:48+08:00">
                2017-02-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/" itemprop="url" rel="index">
                    <span itemprop="name">教程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/ZYNQ/" itemprop="url" rel="index">
                    <span itemprop="name">ZYNQ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/26/zynqflow-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/26/zynqflow-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>浏览
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>我们将在ZYNQ的PL部分添加两个GPIO的IP核，通过PL中的GPIO IP核来扩展PS部分的功能。本实验中的两个GPIO IP核将用来控制板卡上的拨码开关和LED灯，GPIO IP核将通过AXI Interconnect 模块来连接到PS的M_AXI_GP0接口上。GPIO IP核中的寄存器会作为Memory-mapped的方式映射在PS的地址空间上，PS端即可通过对相关地址的控制来完成对相应外设的控制。</p>
<a id="more"></a>
<h1 id="基于Vivado-IP集成器的ZYNQ软硬件设计流程"><a href="#基于Vivado-IP集成器的ZYNQ软硬件设计流程" class="headerlink" title="基于Vivado IP集成器的ZYNQ软硬件设计流程"></a>基于Vivado IP集成器的ZYNQ软硬件设计流程</h1><h2 id="本节实验的步骤说明如下"><a href="#本节实验的步骤说明如下" class="headerlink" title="本节实验的步骤说明如下"></a>本节实验的步骤说明如下</h2><ol>
<li>创建Vivado工程；</li>
<li>在IP集成器环境中添加并配置ARM硬核；</li>
<li>添加并配置GPIO IP核；</li>
<li>执行Vivado综合、实现并生成配置文件；</li>
<li>将硬件工程导出至Vivado SDK；</li>
<li>编写C源文件并编译；</li>
<li>硬件验证。</li>
</ol>
<p>##　作为玩家们的首个ZYNQ实验，博主会在本实验中尽可能详细的介绍基于Vivado工具的ZYNQ软硬件设计细节。将会向各位玩家介绍以下内容。</p>
<ul>
<li>基于Vivado的ZYNQ工程创建，尤其是基于我们ZYPI实验平台的工程创建；</li>
<li>基于IP集成器这种图形化、智能化的开发环境中加入ARM硬核以及其他IP核的方式来创建一个ZYNQ嵌入式硬件工程；</li>
<li>通过图形化的配置界面来完成对ARM硬核的配置，如时钟频率、复位、中断、与PL的接口等相关设置；</li>
<li>在IP集成器中添加、配置软核，如GPIO IP核。并通过AXI Interconnect 模块将各种IP核外设与ARM硬核通过AXI接口连接起来；</li>
<li>IP集成器中添加的软核IP模块的时钟以及复位信号的配置；</li>
<li>IP集成器的智能化设计辅助完成功能；</li>
<li>通过将顶层信号make external的操作来将其与芯片外设备/接口相连接；</li>
<li>通过对不同IP映射不同地址的方式，在软件层面进行控制；</li>
<li>通过创建XDC约束文件，编写IO约束的方式来完成对输入输出IO的位置锁定，使用板卡上对应的资源；</li>
<li>通过执行validation的功能，来对整个IP集成器搭建的系统进行验证；</li>
<li>通过ps7_init.c、ps7_init.h、ps7_init.tcl文件理解Vivado工具是如何完成对硬件的抽象；</li>
<li>通过Vivado SDK完成对ZYNQ嵌入式软件的编写、编译以及调试；</li>
<li>在Vivado SDK环境下编写一个无os、裸跑的应用程序；了解裸跑程序如何使用处理器cache、中断、输入输出以及其他基本处理器特性。</li>
</ul>
<h1 id="实验流程"><a href="#实验流程" class="headerlink" title="实验流程"></a>实验流程</h1><h2 id="那么，我们开始进入实验阶段。首先，创建新工程。"><a href="#那么，我们开始进入实验阶段。首先，创建新工程。" class="headerlink" title="那么，我们开始进入实验阶段。首先，创建新工程。"></a>那么，我们开始进入实验阶段。首先，创建新工程。</h2><p>这部分在之前的博文中也有详细讲解，<a href="http://blog.fpgaplayer.com/2017/02/16/vivadoflow-1/" target="_blank" rel="external">点击这里查看</a>。</p>
<p>打开Vivado集成开发套件</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/083726234.png-960img" alt=""></p>
<p>选择创建一个新的工程，工具会自动打开一个新工程创建向导</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/084732784.png-960img" alt=""></p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/084943965.png-960img" alt=""></p>
<p>点击下一步，填写工程名称以及工程目录，可勾选创建工程子目录。注意，工程的名字以及工程目录均不能出现空格或中文字符。（尤其注意，某些机器的系统桌面路径是含有空格的）</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085138653.png-960img" alt="mark"></p>
<p>下一步，选择工程类型。我们选择RTL型工程，即我们通过添加HDL源码或通过IP集成器的方式生成源文件，然后经过综合、实现生成配置文件的工程类型。<br>其余几种工程类型，从上至下分别为以综合后网表为顶层的工程、IO规划工程、导入的工程以及Vivado自带的实例工程。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085221806.png-960img" alt="mark"></p>
<p>下一步，选择器件或板卡。该步骤，我们需要根据工程中所用到的Xilinx FPGA器件的型号来选择对应的器件，我们可以在Board选项中选择对应的板卡型号。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085238837.png-960img" alt="mark"></p>
<p>添加板卡文件。首次在新装Vivado中使用ZYPI板卡的同学，可以看到在Board选项中尚未加入该板卡，因此我们需要使用官方提供的板卡文件手动添加。将提供的board_files文件解压至：installdir\Vivado\2016.4\data\boards\board_files然后重新启动Vivado后即可在Board下看到ZYPI板卡了。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085314823.png-960img" alt="mark"></p>
<p>选择ZYBO板卡，并点击下一步。即完成工程创建。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085329789.png-960img" alt="mark"></p>
<h3 id="点击完成后，即进入Vivado工程主界面。"><a href="#点击完成后，即进入Vivado工程主界面。" class="headerlink" title="点击完成后，即进入Vivado工程主界面。"></a>点击完成后，即进入Vivado工程主界面。</h3><p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085425706.png-960img" alt="mark"></p>
<p>其中主要有以下几个区域：</p>
<ol>
<li>菜单/工具栏：Vivado IDE工具命令</li>
<li>流程向导：工程管理、IP集成器、仿真、综合、实现以及下载调试各阶段流程控制</li>
<li>工程管理区域：源文件层级结构、网表、库文件、编译顺序视图</li>
<li>工程状态/属性区域：对象属性视图</li>
<li>主工作区域：源文件编辑、原理图、网表、器件、封装等视图</li>
<li>状态/结果显示以及交互区域：TCL交互、信息、log记录、报告、设计运行状态等视图</li>
</ol>
<h1 id="搭建ZYNQ硬件系统设计"><a href="#搭建ZYNQ硬件系统设计" class="headerlink" title="搭建ZYNQ硬件系统设计"></a>搭建ZYNQ硬件系统设计</h1><h2 id="在IP集成器中加入ZYNQ-ARM硬核。"><a href="#在IP集成器中加入ZYNQ-ARM硬核。" class="headerlink" title="在IP集成器中加入ZYNQ ARM硬核。"></a>在IP集成器中加入ZYNQ ARM硬核。</h2><p>在流程向导区域IP集成器栏目下单击Create Block Design，创建一个新的Block Design源文件。其中设计名称、路径等可保持默认。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085454237.png-960img" alt="mark"><br>点击OK后，即可看到主工作区域打开一个空白的Block Design。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085508404.png-960img" alt="mark"><br>在空白区域右键，选择Add IP选项，打开添加IP向导，即IP列表。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085528167.png-960img" alt="mark"><br>在上方搜索框内键入“ZYNQ”，搜索ZYNQ ARM硬核模块。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085536079.png-960img" alt="mark"><br>双击ZYNQ处理器系统条目，将其加入进IP集成器中，可以看到在IP集成器环境中ZYNQ ARM硬核模块就被加入进来了。这时，该模块上的接口为系统默认接口。稍后，我们将会按照使用需求，对ZYNQ的ARM硬核模块进行配置。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085606151.png-960img" alt="mark"></p>
<h2 id="ZYNQ-硬核配置"><a href="#ZYNQ-硬核配置" class="headerlink" title="ZYNQ 硬核配置"></a>ZYNQ 硬核配置</h2><p>首先，我们双击打开ZYNQ配置界面。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085637097.png-960img" alt="mark"><br>可以看到配置界面右侧为详细配置界面首页，左侧为分项页面，依次为：</p>
<ol>
<li>ZYNQ模块视图：ZYNQ总体内部模块结构，绿色显示说明为可配置，单击相应绿色模块可进入对应配置页面；</li>
<li>PS-PL配置：PS与PL之间通信接口相关配置，在PL与PS之间有多种不同接口可用于PS-PL数据交互，依据对数据量以及速度的要求来选择不同接口；</li>
<li>外设IO引脚：ZYNQ 的PS部分拥有多种共计20多个接口控制器硬核，在本页面中可选择使能硬核，以及对其引脚进行分配；</li>
<li>MIO配置：ZYNQ PS部分拥有2个BANK共计54个PS专属的IO，即MIO。在本页面中可对MIO的使用进行配置；</li>
<li>时钟配置：PS部分内置PLL，本页面可针对不同模块的时钟属性进行设置；</li>
<li>DDR配置：PS部分内置DDR控制器硬核模块，本页为DDR控制器相关属性配置页面；</li>
<li>SMC时序配置：SMC（Static Memory Controller）亦为PS内置硬核模块，本页为SMC相关属性配置页面；</li>
<li>中断系统配置：ZYNQ的中断系统配置页面，对PS to PL的中断以及PL to PS的中断进行配置。</li>
</ol>
<p>好了，熟悉了ZYNQ配置界面后，我们可以先使用Vivado工具的设计辅助功能进行ZYNQ的自动配置。注意，正式由于我们在创建工程的时候选择了基于ZYPI板卡创建工程，因此Vivado工具可自动将ZYNQ PS硬核与ZYPI板卡硬件实现细节相匹配，完成ZYNQ PS的自动配置。首先，我们点cancel关掉ZYNQ配置向导，并单击IP集成器上方的Run Block Automation选项，保持默认设置，确保Apply Board Preset选项处于勾选的状态，然后点击OK。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085728551.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085732802.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085738231.png-960img" alt="mark"></p>
<p>可以看到，Vivado工具自动完成针对ZYPI板卡的ZYNQ PS自动配置，将所有ZYPI上用到的接口/外设均设置为合适的状态。如打开ZYNQ配置界面外设IO页面，我们可以看到在ZYPI板卡PCB上连接到相应IO的外设，均按照ZYPI板卡的实际情况完成了对ZYNQ PS的配置。<br>这时，我们可基于这个配置状态进行相应修改，如关掉我们在设计中使用不到的接口或外设。但是，需要注意的是在目前的配置下，没有被使能的外设或接口基本是由于ZYPI板卡物理上没有连接的，因此是不能使用的。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085815764.png-960img" alt="mark"></p>
<p>本实验中，我们会使用PL部分资源构建GPIO IP核，通过AXI互联方式挂在PS端，因此，我们要打开PS中AXI接口以及PS给PL的时钟和复位信号。这部分配置在默认设置中均已打开。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085833505.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085839320.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085843529.png-960img" alt="mark"></p>
<p>第一个实验，可以为了工程清晰简洁以及节省运行时间，我们可以将本实验中不需要用到的接口，在MIO配置页面暂时关掉。如以太网、USB、SD接口以及默认打开的Timer 0关闭。<br>这部分若选择不关闭亦不会影响后续实验步骤。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085923796.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/085928127.png-960img" alt="mark"></p>
<p>最后，点击OK，完成对ZYNQ ARM硬核的配置。此时可以看到ZYBQ PS模块上DDR以及FIXED_IO已经作为顶层信号连接至外部。其中，DDR这组信号即为PS内部DDR控制器硬核与外部DDR存储芯片之间的信号线。FIXED_IO这组信号中，主要包含54根MIO信号线，其中就包含有我们使用到的串口TX、RX信号，即对应到MIO配置页面中uart 1 MIO（48..49）。</p>
<h1 id="利用PL资源扩展系统"><a href="#利用PL资源扩展系统" class="headerlink" title="利用PL资源扩展系统"></a>利用PL资源扩展系统</h1><h2 id="添加GPIO-IP核"><a href="#添加GPIO-IP核" class="headerlink" title="添加GPIO IP核"></a>添加GPIO IP核</h2><p>再次通过Add IP的方式打开IP列表，找到GPIO IP并双击加入进IP集成器中。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090034224.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090038574.png-960img" alt="mark"></p>
<p>双击GPIO IP核模块，打开GPIO IP核配置界面。在Board Interface选项处下拉选择leds 8bits，将该GPIO IP核的通道1配置为与芯片外板卡上8个LED灯相连；同时可以切换到IP Configuration选项卡，可以看到通道1已经被自动设置为位宽为8bit。完成后点击OK，回到IP集成器。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090051598.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090055858.png-960img" alt="mark"></p>
<p>在IP集成器中选中GPIO IP核模块的情况下，在属性窗口中可对该IP模块的名称进行修改。通常，对GPIO模块名称修改为对应功能名称，以方便后续硬件搭建以及软件编写与调试。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090107211.png-960img" alt="mark"></p>
<p>返回到IP集成器，选择Run Block Automation，在弹出的向导中选中leds_8bits这个GPIO模块下的GPIO以及S_AXI，保持默认设置，点击OK完成对GPIO模块的自动连接。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090120700.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090124989.png-960img" alt="mark"></p>
<p>在完成自动连接后，可以看到，Vivado工具自动添加了AXI Interconnect模块来实现leds_8bits与PS之间的连接。ZYNQ PS模块上打开的是一个Master的GP接口，通过AXI Interconnect模块，ZYNQ PS以及与多个Slave的AXI IP相连接。单个AXI Interconnect的Master接口最多有64个，Slave接口最多有16个。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090138184.png-960img" alt="mark"></p>
<p>通过ADD IP的方式，再次添加一个GPIO IP核，配置连接至板上按键，即btns_5bit，同时修改IP名称为btns_5bit。并按照上述步骤，Run Block Automation进行自动连接。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090156677.png-960img" alt="mark"></p>
<p>在IP集成器界面下，切换至Address Editor选项卡中，展开Data项目，可以看到leds_8bits与btns_5bit两个GPIO IP核映射到PS的地址空间。一般来讲，通过Run Block Automation方式完成的IP核，地址会被Vivado工具自动分配，而手动连线方式完成连接的IP核，需要在本页面进行分配地址，即点击页面左侧最下方的按钮Auto Assign Address。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090213351.png-960img" alt="mark"></p>
<p>完成上述步骤后，可点击保存按钮，来保存IP集成器中的硬件设计。同时，可通过运行Vivado 校验工具来检查是否有连接错误的情况。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090235003.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090239241.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090243375.png-960img" alt="mark"></p>
<h1 id="硬件工程的综合、实现以及生成配置文件"><a href="#硬件工程的综合、实现以及生成配置文件" class="headerlink" title="硬件工程的综合、实现以及生成配置文件"></a>硬件工程的综合、实现以及生成配置文件</h1><h2 id="bd封装"><a href="#bd封装" class="headerlink" title="bd封装"></a>bd封装</h2><p>在工程文件管理窗口，点击Source选项卡，其中我们看到design_1.bd即是我们刚刚在IP集成器中完成的block design。对其点击右键，选择Create HDL Wrapper选项，在弹出的窗口中选择有Vivado来管理Wrapper文件的自动更新，并点击OK。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090310121.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090314514.png-960img" alt="mark"></p>
<p>工具会自动生成一个block design 的HDL顶层封装文件，我们后续的综合、实现等过程即是以该文件为顶层进行的。</p>
<h3 id="设计综合"><a href="#设计综合" class="headerlink" title="设计综合"></a>设计综合</h3><p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090329463.png-960img" alt="mark"><br>在Vivado流程向导中开启设计综合，用户可选择运行该次综合所使用的CPU线程数量。根据不同的机器性能配置，综合过程可能会持续若干分钟不等。综合完成后，我们可以选择打开综合后的设计，工具会自动打开器件Device视图。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090342962.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090345994.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090351482.png-960img" alt="mark"></p>
<h3 id="综合后的视图"><a href="#综合后的视图" class="headerlink" title="综合后的视图"></a>综合后的视图</h3><p>我们可以在工具栏上选择不同的视图。此处，我们切换至I/O规划视图。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090404633.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090408886.png-960img" alt="mark"></p>
<p>在Vivado下方窗口自动切换至IO管脚窗口，我们展开GPIO IP模块，可以看到对应的信号已经自动的锁定在对应的管脚上。若使用的板卡非官方板卡，则对外信号的引脚锁定需要手动在该界面进行设定或者通过编写XDC约束文件的方式来进行IO的约束。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090423317.png-960img" alt="mark"></p>
<h3 id="设计实现并生成配置文件"><a href="#设计实现并生成配置文件" class="headerlink" title="设计实现并生成配置文件"></a>设计实现并生成配置文件</h3><p>确认引脚锁定正确后，再次回到流程向导区域，执行过程的实现。在实现过程执行完成后，可直接进行配置文件的生成步骤。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090434621.png-960img" alt="mark"></p>
<p>在配置文件生成之后，选择打开实现后的设计（若提示是否先关闭综合后的设计，请选择YES）。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090445254.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090448752.png-960img" alt="mark"></p>
<h3 id="导出硬件"><a href="#导出硬件" class="headerlink" title="导出硬件"></a>导出硬件</h3><p>至此，本实验的硬件工程就完成了，下面我们需要将硬件工程导出至Vivado SDK以便做后续的软件工程。通过File &gt; Export &gt; Export Hardware，打开导出窗口，注意此处我们需要点击勾选Include birstream来将配置文件同时导出。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090502069.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090506244.png-960img" alt="mark"></p>
<h3 id="开启SDK"><a href="#开启SDK" class="headerlink" title="开启SDK"></a>开启SDK</h3><p>OK，Vivado中的工作就到一段落了。接下来我们就要转战SDK，进行ZYNQ软件设计了。通过File &gt; Launch SDK来打开SDK工具。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090517911.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090520828.png-960img" alt="mark"></p>
<h1 id="ZYNQ软件开发-SDK流程"><a href="#ZYNQ软件开发-SDK流程" class="headerlink" title="ZYNQ软件开发-SDK流程"></a>ZYNQ软件开发-SDK流程</h1><p>通过Vivado打开SDK工具。SDK首先将导入Vivado导出的硬件工程信息文件。并自动创建一个硬件平台工程。其中包含硬件工程生成的配置文件（.bit），以及Vivado工具导出的硬件平台描述文件（.hdf），以及其他PS部分启动文件。</p>
<h3 id="SDK初始界面"><a href="#SDK初始界面" class="headerlink" title="SDK初始界面"></a>SDK初始界面</h3><p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090606575.png-960img" alt="mark"></p>
<h3 id="SDK下的硬件平台工程"><a href="#SDK下的硬件平台工程" class="headerlink" title="SDK下的硬件平台工程"></a>SDK下的硬件平台工程</h3><p>SDK会默认打开hdf文件，hdf文件中详细的描述了当前系统的硬件信息，如目标器件、硬件工程创建时间，以及工程中包含的全部IP列表（包括PS内部以及PL中的IP）和地址映射关系。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090619478.png-960img" alt="mark"></p>
<p>在SDK自动创建的硬件平台工程中，包含有一个ps7_init.html文件，该文件详细描述了当前ZYNQ PS系统的细节信息，如MIO、CLK、DDR、SMC等部门的配置信息以及全部寄存器的详细描述。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090630376.png-960img" alt="mark"></p>
<h3 id="BSP与APP工程"><a href="#BSP与APP工程" class="headerlink" title="BSP与APP工程"></a>BSP与APP工程</h3><p>创建应用程序以及BSP工程。在SDK环境下，通过File &gt; New &gt; Application Project打开应用工程创建向导。工程名称自拟，OS选择standalone操作系统（Xilinx提供的一个轻量级操作系统，屏蔽掉若干底层细节，提供诸多API可直接使用），硬件平台选择SDK自动导入并创建的硬件平台工程，并选择创建一个新的BSP工程。点击下一步，选择一个空的模板来创建应用工程。</p>
<p><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090642834.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090649346.png-960img" alt="mark"></p>
<p>点击完成后，SDK开始自动编译应用工程以及BSP工程源码。完成后，可以在工程浏览器窗口看到新建的lab1工程以及lab1_bsp工程。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090701021.png-960img" alt="mark"></p>
<h3 id="创建或添加源文件"><a href="#创建或添加源文件" class="headerlink" title="创建或添加源文件"></a>创建或添加源文件</h3><p>创建源文件。在lab1工程src目录上右键选择New-Source File，在打开的新建源文件向导窗口中输入新建源文件的名称以及后缀，如lab1.c，并点击完成，则可以看到src中新增了一个c源文件，并在在右侧窗口中打开了该c文件。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090712661.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090716944.png-960img" alt="mark"><br>通过复制粘贴的方式，将下面提供的lab1.c中的程序copy进SDK中的lab1.c中，保存并编译。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090730483.png-960img" alt="mark"></p>
<h3 id="lab1-c"><a href="#lab1-c" class="headerlink" title="lab1.c"></a>lab1.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="comment">//Variables Declarations</span></div><div class="line">	XGpio push, led; <span class="comment">// instance pointer for the push buttons and LEDs</span></div><div class="line">	<span class="keyword">int</span> i,push_check;</div><div class="line">	<span class="keyword">int</span> out = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> val=<span class="number">1</span>;</div><div class="line">	xil_printf(<span class="string">"Lab1 application started.... \r \n"</span>);</div><div class="line">	<span class="keyword">int</span> delay_value=<span class="number">9999999</span>;</div><div class="line"></div><div class="line">	<span class="comment">//AXI GPIO Initialization</span></div><div class="line">	XGpio_Initialize(&amp;push,XPAR_BTNS_5BITS_DEVICE_ID);</div><div class="line">	XGpio_Initialize(&amp;led,XPAR_LEDS_8BITS_DEVICE_ID);</div><div class="line">	<span class="comment">//AXI GPIO Set Direction</span></div><div class="line">	XGpio_SetDataDirection(&amp;push,<span class="number">1</span>,<span class="number">0xffffffff</span>);</div><div class="line">	XGpio_SetDataDirection(&amp;led,<span class="number">1</span>,<span class="number">0x00000000</span>);</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="number">1</span>)&#123;</div><div class="line">	<span class="comment">//Reading from the push buttons</span></div><div class="line">		push_check= XGpio_DiscreteRead(&amp;push,<span class="number">1</span>);</div><div class="line"></div><div class="line">		<span class="keyword">switch</span> (push_check)&#123;</div><div class="line"></div><div class="line">		<span class="comment">//Checking if BTNC was pressed</span></div><div class="line">		<span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">			delay_value=<span class="number">9999999</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="comment">//Checking if BTND was pressed</span></div><div class="line">		<span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">			val = <span class="number">-1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line"></div><div class="line">		<span class="comment">//Checking if BTNL was pressed</span></div><div class="line">		<span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">			delay_value=<span class="number">19999999</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line"></div><div class="line">		<span class="comment">//Checking if BTNR was pressed</span></div><div class="line">		<span class="keyword">case</span> <span class="number">8</span>:</div><div class="line">			delay_value=<span class="number">4099999</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line"></div><div class="line">		<span class="comment">//Checking if BTNU was pressed</span></div><div class="line">		<span class="keyword">case</span> <span class="number">16</span>:</div><div class="line">			val =<span class="number">1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line"></div><div class="line">		<span class="keyword">default</span>:</div><div class="line">		<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	<span class="comment">//Printing the value returned by XGpio_DiscreteRead</span></div><div class="line">		xil_printf(<span class="string">"Push Buttons Status: %d \r \n"</span>,push_check);</div><div class="line"></div><div class="line">	<span class="comment">//Printing the value of variable val and out</span></div><div class="line">		xil_printf(<span class="string">"Value of val: %d \r \n"</span>,val);</div><div class="line">		xil_printf(<span class="string">"Value of out: %d \r \n"</span>,out);</div><div class="line">	<span class="comment">// Incrementing the value of out by val</span></div><div class="line">		out = out+val;</div><div class="line">	<span class="comment">// Checking boundaries</span></div><div class="line">		<span class="keyword">if</span> (out &gt; <span class="number">15</span>)&#123;</div><div class="line">					out=<span class="number">0</span>;</div><div class="line">					  &#125;</div><div class="line">		<span class="keyword">if</span> (out&lt; <span class="number">0</span>) &#123;</div><div class="line">					out=<span class="number">15</span>;</div><div class="line">					&#125;</div><div class="line">	<span class="comment">//Writing the value of variable out to the LEDs</span></div><div class="line">		XGpio_DiscreteWrite(&amp;led,<span class="number">1</span>,out);</div><div class="line"></div><div class="line">	<span class="comment">// Creating a software delay</span></div><div class="line">		<span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;delay_value;i++);</div><div class="line"></div><div class="line">			&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> (<span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="硬件验证"><a href="#硬件验证" class="headerlink" title="硬件验证"></a>硬件验证</h2><h3 id="硬件连接"><a href="#硬件连接" class="headerlink" title="硬件连接"></a>硬件连接</h3><p>将ZYPI板卡连接至PC。使用USB连接线将PC与板卡USB-UART接口（如图标示3处）进行连接；使用USB连接线将PC与板卡USB-JTAG接口（如图标示2处）进行连接以便进行配置文件下载以及工程调试。同时在硬件管理器中观察被PC识别到的串口COM号。可在SDK中或单独的串口终端中来观察PS串口的输出。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/090956538.png-960img" alt="mark"></p>
<h3 id="硬件配置"><a href="#硬件配置" class="headerlink" title="硬件配置"></a>硬件配置</h3><p>在Xilinx Tools下选择Program FPGA完成对FPGA的硬件配置。在弹出的窗口中会自动识别当前工程对应的配置文件，点击Program在进行配置。配置完成后可观察到此时板卡上的Done信号亮起（蓝色LED灯）。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/091007963.png-960img" alt="mark"><br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/091011072.png-960img" alt="mark"></p>
<h3 id="软件调试"><a href="#软件调试" class="headerlink" title="软件调试"></a>软件调试</h3><p>应用工程lab1上右键，选择Run As - Launch on Hardware在硬件上进行运行。<br>此时，可以观察到LED流水灯效果，并且按下不同按键会有相应变化，同时串口终端会打印出程序运行输出的相关信息。<br><img src="http://okr8rgx0y.bkt.clouddn.com/myblog/20170226/091026117.png-960img" alt="mark"></p>
<h1 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h1><p>相关软硬件协同设计、AXI总线、自定义ZYNQ PL IP核、ARM CPU调试、相关AXI IP使用等内容，咱们后面接着聊。</p>
<hr>
<h2 id=""><a href="#" class="headerlink" title=""></a>
<div id="MySignature" style="display: block;">

<p id="PSignature" style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed;            padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 110px;            background: url(https://i.creativecommons.org/l/by/4.0/88x31.png-960img) #e5f1f4 no-repeat 1% 50%;            font-family: 微软雅黑; font-size:11px;">  
<br><strong>作者：FPGAPlayer</strong>
<br><strong>出处：</strong><a rel="" href="http://fpgaplayer.com">http://FPGAPlayer.com </a>   
<br><strong>本文采用：</strong><a rel="external" href="http://creativecommons.org/licenses/by/4.0/" target="_blank">知识共享署名 4.0 国际许可协议</a><strong>进行许可</strong>
<br><strong>欢迎转载，但未经原作者同意必须保留此段声明，且在文章页面明显位置给出原文连接。</strong>
</p>
</div>
</h2>
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="ProgId" content="Word.Document">
<meta name="Generator" content="Microsoft Word 15">
<meta name="Originator" content="Microsoft Word 15">
<link rel="File-List" href="/misc/filelist.xml">
<link rel="themeData" href="/misc/themedata.thmx">
<link rel="colorSchemeMapping" href="/misc/colorschememapping.xml">
</head>
<body lang="ZH-CN" style="tab-interval:21.0pt;text-justify-trim:punctuation">
<div class="WordSection1" style="layout-grid:15.6pt">
<p class="MsoNormal" align="center" style="text-align:center"><span lang="EN-US" style="color:red">FPGAPlayer.com</span><span style="color:red">是一个非牟利的网站，网站的运营<span lang="EN-US">/</span>管理<span lang="EN-US">/</span>维护费用其实<span class="GramE"><b style="mso-bidi-font-weight:normal"><u>很低很低</u></b></span>的！<span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" align="center" style="text-align:center"><span style="color:red">但是博<span class="GramE">主坚持</span>原创分享的</span><b style="mso-bidi-font-weight:normal"><u><span style="font-size:12.0pt;
mso-bidi-font-size:11.0pt;color:red"> 心 </span></u></b><span style="color:red">需要广大“玩家”的支持和鼓励！<span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" align="center" style="text-align:center"><span style="color:red">码字不易，点击</span><b style="mso-bidi-font-weight:normal"><u><span style="font-size:12.0pt;mso-bidi-font-size:11.0pt;color:red">“赏”</span></u></b><span style="color:red">，<span class="GramE">请博主喝</span>杯咖啡吧！<span lang="EN-US"><o:p></o:p></span></span></p>
</div>
</body>
</html>



      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div></div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="https://raw.githubusercontent.com/hwpro2017/hwpro2017.github.io/master/path/to/wechat-reward-image.png" alt="FPGA玩家 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="https://raw.githubusercontent.com/hwpro2017/hwpro2017.github.io/master/path/to/alipay-reward-image.png" alt="FPGA玩家 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vivado-Flow/" rel="tag"># Vivado Flow</a>
          
            <a href="/tags/ZYNQ-Flow/" rel="tag"># ZYNQ Flow</a>
          
            <a href="/tags/ZYPI/" rel="tag"># ZYPI</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/02/19/koheronsdk-base7/" rel="next" title="Koheron SDK使用指南之Jupyter服务器">
                <i class="fa fa-chevron-left"></i> Koheron SDK使用指南之Jupyter服务器
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/02/26/vivadoflow-2/" rel="prev" title="Vivado上手教程2-基本硬件设计流程">
                Vivado上手教程2-基本硬件设计流程 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style_32x32">
<a class="jiathis_button_weixin"></a>
<a class="jiathis_button_email"></a>
<a class="jiathis_button_evernote"></a>
<a class="jiathis_button_ydnote"></a>
<a class="jiathis_button_cqq"></a>
<a class="jiathis_button_copy"></a>
<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
	summary:"",
	shortUrl:false,
	hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>

          
          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/02/26/zynqflow-1/"
           data-title="ZYNQ上手教程1-软硬件协同设计流程" data-url="http://fpgaplayer.com/2017/02/26/zynqflow-1/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="FPGA玩家" />
          <p class="site-author-name" itemprop="name">FPGA玩家</p>
          <p class="site-description motion-element" itemprop="description">软件靠硬件改变世界！</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="mailto:hwpro2017@163.com" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Email
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/6122859050" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://fpgaplayer.com/" title="FPGAPlayer网站" target="_blank">FPGAPlayer网站</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="mailto:hwpro2017@163.com" title="交换友情链接请联系" target="_blank">交换友情链接请联系</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="mailto:hwpro2017@163.com" title="咨询与合作" target="_blank">咨询与合作</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#基于Vivado-IP集成器的ZYNQ软硬件设计流程"><span class="nav-number">1.</span> <span class="nav-text">基于Vivado IP集成器的ZYNQ软硬件设计流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#本节实验的步骤说明如下"><span class="nav-number">1.1.</span> <span class="nav-text">本节实验的步骤说明如下</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#实验流程"><span class="nav-number">2.</span> <span class="nav-text">实验流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#那么，我们开始进入实验阶段。首先，创建新工程。"><span class="nav-number">2.1.</span> <span class="nav-text">那么，我们开始进入实验阶段。首先，创建新工程。</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#点击完成后，即进入Vivado工程主界面。"><span class="nav-number">2.1.1.</span> <span class="nav-text">点击完成后，即进入Vivado工程主界面。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#搭建ZYNQ硬件系统设计"><span class="nav-number">3.</span> <span class="nav-text">搭建ZYNQ硬件系统设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#在IP集成器中加入ZYNQ-ARM硬核。"><span class="nav-number">3.1.</span> <span class="nav-text">在IP集成器中加入ZYNQ ARM硬核。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ZYNQ-硬核配置"><span class="nav-number">3.2.</span> <span class="nav-text">ZYNQ 硬核配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#利用PL资源扩展系统"><span class="nav-number">4.</span> <span class="nav-text">利用PL资源扩展系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加GPIO-IP核"><span class="nav-number">4.1.</span> <span class="nav-text">添加GPIO IP核</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#硬件工程的综合、实现以及生成配置文件"><span class="nav-number">5.</span> <span class="nav-text">硬件工程的综合、实现以及生成配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#bd封装"><span class="nav-number">5.1.</span> <span class="nav-text">bd封装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#设计综合"><span class="nav-number">5.1.1.</span> <span class="nav-text">设计综合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#综合后的视图"><span class="nav-number">5.1.2.</span> <span class="nav-text">综合后的视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设计实现并生成配置文件"><span class="nav-number">5.1.3.</span> <span class="nav-text">设计实现并生成配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导出硬件"><span class="nav-number">5.1.4.</span> <span class="nav-text">导出硬件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开启SDK"><span class="nav-number">5.1.5.</span> <span class="nav-text">开启SDK</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ZYNQ软件开发-SDK流程"><span class="nav-number">6.</span> <span class="nav-text">ZYNQ软件开发-SDK流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SDK初始界面"><span class="nav-number">6.0.1.</span> <span class="nav-text">SDK初始界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SDK下的硬件平台工程"><span class="nav-number">6.0.2.</span> <span class="nav-text">SDK下的硬件平台工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BSP与APP工程"><span class="nav-number">6.0.3.</span> <span class="nav-text">BSP与APP工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建或添加源文件"><span class="nav-number">6.0.4.</span> <span class="nav-text">创建或添加源文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lab1-c"><span class="nav-number">6.0.5.</span> <span class="nav-text">lab1.c</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#硬件验证"><span class="nav-number">6.1.</span> <span class="nav-text">硬件验证</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#硬件连接"><span class="nav-number">6.1.1.</span> <span class="nav-text">硬件连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#硬件配置"><span class="nav-number">6.1.2.</span> <span class="nav-text">硬件配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#软件调试"><span class="nav-number">6.1.3.</span> <span class="nav-text">软件调试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#后续"><span class="nav-number">7.</span> <span class="nav-text">后续</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#"><span class="nav-number">7.1.</span> <span class="nav-text">


  
作者：FPGAPlayer
出处：http://FPGAPlayer.com    
本文采用：知识共享署名 4.0 国际许可协议进行许可
欢迎转载，但未经原作者同意必须保留此段声明，且在文章页面明显位置给出原文连接。


</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FPGA玩家</span>
</div>



        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i>访客<span class="busuanzi-value" id="busuanzi_value_site_uv"></span>人</span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i>共<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"fpgaplayer"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js?v=5.1.0"></script>
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  












  
  

  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  


</body>
</html>
